[//]: # (Automatically generated by Sociable Weaver)
# Shopping

A simple web application comprising from two components, a catalogue and a cart.
The cart component depends on the catalogue component for information about the
catalogue items, such as description.

This demo implements the same solution using different architecture styles:

- [Layered Monolithic](./monolithic-layered/README.md)
- [Modular Monolithic](./monolithic-modular/README.md)
- [Distributed REST (synchronous)](./distributed-rest/README.md)
- [Distributed Messaging (asynchronous)](./distributed-messaging/README.md)
- [Distributed Kafka (asynchronous)](./distributed-kafka/README.md)

Please refer to each project for more information about the specific
implementation.

All projects copy their artifacts into the `./demo` directory for convenience.

## Preloaded data

To keep things simple, weâ€™ll use the
[H2](https://www.h2database.com/html/main.html) in-memory database preloaded
with the following data:

- **Catalog Items**

  | `id` | `caption`     | `description`                                                         |
  | ---: | ------------- | --------------------------------------------------------------------- |
  |    1 | Leather Sofa  | A very nice and comfortable sofa                                      |
  |    2 | Wooden Table  | A large table ideal for 6 to 8 people                                 |
  |    3 | Plastic Chair | A robust plastic chair ideal for children and adults alike            |
  |    4 | Mug           | The ideal way to start the day                                        |
  |    5 | LED TV        | A very large TV set, ideal for those who love to binge-watch TV shows |

- **Carts**

  | `id` |
  | ---: |
  |    1 |
  |    2 |
  |    3 |

- **Cart Items**

  | `cart_id` | `item_id` | `quantity` |
  | --------: | --------: | ---------: |
  |         1 |         1 |          1 |
  |         1 |         5 |          1 |
  |         2 |         2 |          1 |
  |         2 |         3 |          6 |
  |         3 |         4 |          4 |

The `cart_id` and `item_id` in the cart items table are foreign keys to the cart
and catalogue item tables, respectively.

## Prerequisites

- [Oracle Java 21](https://www.oracle.com/java/technologies/downloads/#java21)
- Container runtime, such as [Colima](https://github.com/abiosoft/colima), to
  run the required services as containers.

## Run the examples

1. **Build all applications**

   This builds all projects, runs the respective tests and then copies the fat
   JAR files into the [`./demo` directory](./demo).

   ```shell
   rm -rf './demo'
   ./mvnw clean package
   ```

   All tests should pass.

   (_Optional_) Verify that the fat JAR files were all created and copied.

   ```shell
   tree --charset=ascii --dirsfirst --sort=name -L 1 --prune './demo'
   ```

   The fat JAR files from all projects

   ```
   ./demo
   |-- demo-shopping-distributed-rest-cart-1.0.0.jar
   |-- demo-shopping-distributed-rest-catalogue-1.0.0.jar
   |-- demo-shopping-monolithic-layered-1.0.0.jar
   `-- demo-shopping-monolithic-modular-1.0.0.jar

   1 directory, 4 files
   ```

2. **Run the applications**

   There are four web applications, and these applications listens on the same
   ports, such as `8080`, `8081`, and `8082`. Change the default port to run
   these applications at the same time.

   Please refer to each project to see how to run the respective application.

   - [Layered Monolithic](./monolithic-layered/README.md)
   - [Modular Monolithic](./monolithic-modular/README.md)
   - [Distributed REST (synchronous)](./distributed-rest/README.md)
   - [Distributed Messaging (asynchronous)](./distributed-messaging/README.md)
